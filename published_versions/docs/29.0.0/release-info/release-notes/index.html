<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-release-info/release-notes" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Release notes | Apache® Druid</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://druid.apache.org/img/druid_nav.png"><meta data-rh="true" name="twitter:image" content="https://druid.apache.org/img/druid_nav.png"><meta data-rh="true" property="og:url" content="https://druid.apache.org/docs/29.0.0/release-info/release-notes"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Release notes | Apache® Druid"><meta data-rh="true" name="description" content="&lt;!--"><meta data-rh="true" property="og:description" content="&lt;!--"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://druid.apache.org/docs/29.0.0/release-info/release-notes"><link data-rh="true" rel="alternate" href="https://druid.apache.org/docs/29.0.0/release-info/release-notes" hreflang="en"><link data-rh="true" rel="alternate" href="https://druid.apache.org/docs/29.0.0/release-info/release-notes" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-131010415-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-131010415-1",{})</script>





<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js"></script><link rel="stylesheet" href="/assets/css/styles.4b88a1d0.css">
<link rel="preload" href="/assets/js/runtime~main.40c33c04.js" as="script">
<link rel="preload" href="/assets/js/main.c54d5655.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/druid_nav.png" alt="Apache® Druid" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/druid_nav.png" alt="Apache® Druid" class="themedImage_ToTc themedImage--dark_i4oU"></div></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/technology">Technology</a><a class="navbar__item navbar__link" href="/use-cases">Use Cases</a><a class="navbar__item navbar__link" href="/druid-powered">Powered By</a><a class="navbar__item navbar__link" href="/docs/29.0.0/design/">Docs</a><a class="navbar__item navbar__link" href="/community/">Community</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Apache®</a><ul class="dropdown__menu"><li><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Foundation<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://apachecon.com/?ref=druid.apache.org" target="_blank" rel="noopener noreferrer" class="dropdown__link">Events<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="dropdown__link">License<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Thanks<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Security<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Sponsorship<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><a class="navbar__item navbar__link" href="/downloads/">Download</a><div class="searchBox_ZlJk"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/29.0.0/design/">Getting started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/29.0.0/tutorials/tutorial-msq-extern">Tutorials</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/29.0.0/design/architecture">Design</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/29.0.0/ingestion/">Ingestion</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/29.0.0/data-management/">Data management</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/29.0.0/querying/sql">Querying</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/29.0.0/api-reference/">API reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/29.0.0/configuration/">Configuration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/29.0.0/operations/web-console">Operations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/29.0.0/development/overview">Development</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/29.0.0/misc/papers-and-talks">Misc</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/29.0.0/release-info/release-notes">Release info</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/29.0.0/release-info/release-notes">Release notes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/29.0.0/release-info/upgrade-notes">Upgrade notes</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Release info</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Release notes</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Release notes</h1></header><p>Apache Druid 29.0.0 contains over 350 new features, bug fixes, performance enhancements, documentation improvements, and additional test coverage from 67 contributors.</p><p>See the <a href="https://github.com/apache/druid/issues?q=is%3Aclosed+milestone%3A29.0.0+sort%3Aupdated-desc+" target="_blank" rel="noopener noreferrer">complete set of changes</a> for additional details, including bug fixes.</p><p>Review the <a href="#upgrade-notes">upgrade notes</a> before you upgrade to Druid 29.0.0.
If you are upgrading across multiple versions, see the <a href="/docs/29.0.0/release-info/upgrade-notes">Upgrade notes</a> page, which lists upgrade notes for the most recent Druid versions.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="important-features-changes-and-deprecations">Important features, changes, and deprecations<a href="#important-features-changes-and-deprecations" class="hash-link" aria-label="Direct link to Important features, changes, and deprecations" title="Direct link to Important features, changes, and deprecations">​</a></h2><p>This section contains important information about new and existing features.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="msq-export-statements-experimental">MSQ export statements (experimental)<a href="#msq-export-statements-experimental" class="hash-link" aria-label="Direct link to MSQ export statements (experimental)" title="Direct link to MSQ export statements (experimental)">​</a></h3><p>Druid 29.0.0 adds experimental support for export statements to the MSQ task engine. This allows query tasks to write data to an external destination through the <a href="https://druid.apache.org/docs/latest/multi-stage-query/reference#extern-function" target="_blank" rel="noopener noreferrer"><code>EXTERN</code> function</a>.</p><p><a href="https://github.com/apache/druid/pull/15689" target="_blank" rel="noopener noreferrer">#15689</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sql-pivot-and-unpivot-experimental">SQL PIVOT and UNPIVOT (experimental)<a href="#sql-pivot-and-unpivot-experimental" class="hash-link" aria-label="Direct link to SQL PIVOT and UNPIVOT (experimental)" title="Direct link to SQL PIVOT and UNPIVOT (experimental)">​</a></h3><p>Druid 29.0.0 adds experimental support for the SQL PIVOT and UNPIVOT operators.</p><p>The PIVOT operator carries out an aggregation and transforms rows into columns in the output. The following is the general syntax for the PIVOT operator:</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">PIVOT</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">aggregation_function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">column_to_aggregate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">FOR</span><span class="token plain"> column_with_values_to_pivot</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">IN</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">pivoted_column1 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> pivoted_column2 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The UNPIVOT operator transforms existing column values into rows. The following is the general syntax for the UNPIVOT operator:</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">UNPIVOT</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">values_column </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">FOR</span><span class="token plain"> names_column</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">IN</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">unpivoted_column1 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> unpivoted_column2 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="range-support-in-window-functions-experimental">Range support in window functions (experimental)<a href="#range-support-in-window-functions-experimental" class="hash-link" aria-label="Direct link to Range support in window functions (experimental)" title="Direct link to Range support in window functions (experimental)">​</a></h3><p>Window functions (experimental) now support ranges where both endpoints are unbounded or are the current row. Ranges work in strict mode, which means that Druid will fail queries that aren&#x27;t supported. You can turn off strict mode for ranges by setting the context parameter <code>windowingStrictValidation</code> to <code>false</code>.</p><p>The following example shows a window expression with RANGE frame specifications:</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">ORDER</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">BY</span><span class="token plain"> c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">ORDER</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">BY</span><span class="token plain"> c RANGE </span><span class="token operator" style="color:rgb(137, 221, 255)">BETWEEN</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">UNBOUNDED</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">PRECEDING</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">AND</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">CURRENT</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">ROW</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">ORDER</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">BY</span><span class="token plain"> c RANGE </span><span class="token operator" style="color:rgb(137, 221, 255)">BETWEEN</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">CURRENT</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">ROW</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">AND</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">UNBOUNDED</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">PRECEDING</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="https://github.com/apache/druid/pull/15703" target="_blank" rel="noopener noreferrer">#15703</a> <a href="https://github.com/apache/druid/pull/15746" target="_blank" rel="noopener noreferrer">#15746</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="improved-inner-joins">Improved INNER joins<a href="#improved-inner-joins" class="hash-link" aria-label="Direct link to Improved INNER joins" title="Direct link to Improved INNER joins">​</a></h3><p>Druid now supports arbitrary join conditions for INNER join. Any sub-conditions that can&#x27;t be evaluated as part of the join are converted to a post-join filter. Improved join capabilities allow Druid to more effectively support applications like Tableau.</p><p><a href="https://github.com/apache/druid/pull/15302" target="_blank" rel="noopener noreferrer">#15302</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="improved-concurrent-append-and-replace-experimental">Improved concurrent append and replace (experimental)<a href="#improved-concurrent-append-and-replace-experimental" class="hash-link" aria-label="Direct link to Improved concurrent append and replace (experimental)" title="Direct link to Improved concurrent append and replace (experimental)">​</a></h3><p>You no longer have to manually determine the task lock type for concurrent append and replace (experimental) with the <code>taskLockType</code> task context. Instead, Druid can now determine it automatically for you. You can use the context parameter <code>&quot;useConcurrentLocks&quot;: true</code> for individual tasks and datasources or enable concurrent append and replace at a cluster level using <code>druid.indexer.task.default.context</code>.</p><p><a href="https://github.com/apache/druid/pull/15684" target="_blank" rel="noopener noreferrer">#15684</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="first-and-last-aggregators-for-double-float-and-long-data-types">First and last aggregators for double, float, and long data types<a href="#first-and-last-aggregators-for-double-float-and-long-data-types" class="hash-link" aria-label="Direct link to First and last aggregators for double, float, and long data types" title="Direct link to First and last aggregators for double, float, and long data types">​</a></h3><p>Druid now supports first and last aggregators for the double, float, and long types in native and MSQ ingestion spec and MSQ queries. Previously, they were only supported for native queries. For more information, see <a href="https://druid.apache.org/docs/latest/querying/aggregations/#first-and-last-aggregators" target="_blank" rel="noopener noreferrer">First and last aggregators</a>.</p><p><a href="https://github.com/apache/druid/pull/14462" target="_blank" rel="noopener noreferrer">#14462</a></p><p>Additionally, the following functions can now return numeric values:</p><ul><li>EARLIEST and EARLIEST_BY</li><li>LATEST and LATEST_BY</li></ul><p>You can use these functions as aggregators at ingestion time.</p><p><a href="https://github.com/apache/druid/pull/15607" target="_blank" rel="noopener noreferrer">#15607</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="support-for-logging-audit-events">Support for logging audit events<a href="#support-for-logging-audit-events" class="hash-link" aria-label="Direct link to Support for logging audit events" title="Direct link to Support for logging audit events">​</a></h3><p>Added support for logging audit events and improved coverage of audited REST API endpoints.
To enable logging audit events, set config <code>druid.audit.manager.type</code> to <code>log</code> in both the Coordinator and Overlord or in <code>common.runtime.properties</code>. When you set <code>druid.audit.manager.type</code> to <code>sql</code>, audit events are persisted to metadata store.</p><p>In both cases, Druid audits the following events:</p><ul><li>Coordinator<ul><li>Update load rules</li><li>Update lookups</li><li>Update coordinator dynamic config</li><li>Update auto-compaction config</li></ul></li><li>Overlord<ul><li>Submit a task</li><li>Create/update a supervisor</li><li>Update worker config</li></ul></li><li>Basic security extension<ul><li>Create user</li><li>Delete user</li><li>Update user credentials</li><li>Create role</li><li>Delete role</li><li>Assign role to user</li><li>Set role permissions</li></ul></li></ul><p><a href="https://github.com/apache/druid/pull/15480" target="_blank" rel="noopener noreferrer">#15480</a> <a href="https://github.com/apache/druid/pull/15653" target="_blank" rel="noopener noreferrer">#15653</a></p><p>Also fixed an issue with the basic auth integration test by not persisting logs to the database.</p><p><a href="https://github.com/apache/druid/pull/15561" target="_blank" rel="noopener noreferrer">#15561</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="enabled-empty-ingest-queries">Enabled empty ingest queries<a href="#enabled-empty-ingest-queries" class="hash-link" aria-label="Direct link to Enabled empty ingest queries" title="Direct link to Enabled empty ingest queries">​</a></h3><p>The MSQ task engine now allows empty ingest queries by default. Previously, ingest queries that produced no data would fail with the <code>InsertCannotBeEmpty</code> MSQ fault.
For more information, see <a href="#enabled-empty-ingest-queries">Empty ingest queries in the upgrade notes</a>.</p><p><a href="https://github.com/apache/druid/pull/15674" target="_blank" rel="noopener noreferrer">#15674</a> <a href="https://github.com/apache/druid/pull/15495" target="_blank" rel="noopener noreferrer">#15495</a></p><p>In the web console, you can use a toggle to control whether an ingestion fails if the ingestion query produces no data.</p><p><a href="https://github.com/apache/druid/pull/15627" target="_blank" rel="noopener noreferrer">#15627</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="msq-support-for-google-cloud-storage">MSQ support for Google Cloud Storage<a href="#msq-support-for-google-cloud-storage" class="hash-link" aria-label="Direct link to MSQ support for Google Cloud Storage" title="Direct link to MSQ support for Google Cloud Storage">​</a></h3><p>The MSQ task engine now supports Google Cloud Storage (GCS). You can use durable storage with GCS. See <a href="https://druid.apache.org/docs/latest/multi-stage-query/reference#durable-storage-configurations" target="_blank" rel="noopener noreferrer">Durable storage configurations</a> for more information.</p><p><a href="https://github.com/apache/druid/pull/15398" target="_blank" rel="noopener noreferrer">#15398</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="experimental-extensions">Experimental extensions<a href="#experimental-extensions" class="hash-link" aria-label="Direct link to Experimental extensions" title="Direct link to Experimental extensions">​</a></h3><p>Druid 29.0.0 adds the following extensions.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ddsketch">DDSketch<a href="#ddsketch" class="hash-link" aria-label="Direct link to DDSketch" title="Direct link to DDSketch">​</a></h4><p>A new DDSketch extension is available as a community contribution. The DDSketch extension (<code>druid-ddsketch</code>) provides support for approximate quantile queries using the <a href="https://github.com/datadog/sketches-java" target="_blank" rel="noopener noreferrer">DDSketch</a> library.</p><p><a href="https://github.com/apache/druid/pull/15049" target="_blank" rel="noopener noreferrer">#15049</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="spectator-histogram">Spectator histogram<a href="#spectator-histogram" class="hash-link" aria-label="Direct link to Spectator histogram" title="Direct link to Spectator histogram">​</a></h4><p>A new histogram extension is available as a community contribution. The Spectator-based histogram extension (<code>druid-spectator-histogram</code>) provides approximate histogram aggregators and percentile post-aggregators based on <a href="https://netflix.github.io/atlas-docs/spectator/" target="_blank" rel="noopener noreferrer">Spectator</a> fixed-bucket histograms.</p><p><a href="https://github.com/apache/druid/pull/15340" target="_blank" rel="noopener noreferrer">#15340</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="delta-lake">Delta Lake<a href="#delta-lake" class="hash-link" aria-label="Direct link to Delta Lake" title="Direct link to Delta Lake">​</a></h4><p>A new Delta Lake extension is available as a community contribution. The Delta Lake extension (<code>druid-deltalake-extensions</code>) lets you use the <a href="https://druid.apache.org/docs/latest/development/extensions-contrib/delta-lake" target="_blank" rel="noopener noreferrer">Delta Lake input source</a> to ingest data stored in a Delta Lake table into Apache Druid.</p><p><a href="https://github.com/apache/druid/pull/15755" target="_blank" rel="noopener noreferrer">#15755</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="functional-area-and-related-changes">Functional area and related changes<a href="#functional-area-and-related-changes" class="hash-link" aria-label="Direct link to Functional area and related changes" title="Direct link to Functional area and related changes">​</a></h2><p>This section contains detailed release notes separated by areas.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="web-console">Web console<a href="#web-console" class="hash-link" aria-label="Direct link to Web console" title="Direct link to Web console">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="support-for-array-types">Support for array types<a href="#support-for-array-types" class="hash-link" aria-label="Direct link to Support for array types" title="Direct link to Support for array types">​</a></h4><p>Added support for array types for all the ingestion wizards.</p><p><img loading="lazy" alt="Load data" src="/assets/images/image03-54128b2b56fe83ac3b347825ff1e5307.png" width="1471" height="1000" class="img_ev3q"></p><p>When loading multi-value dimensions or arrays using the Druid <strong>Query</strong> console, note the value of the <code>arrayIngestMode</code> parameter. Druid now configures the <code>arrayIngestMode</code> parameter in the data loading flow, and its value can persist across the SQL tab, even if you execute unrelated Data Manipulation Language (DML) operations within the same tab.</p><p><a href="https://github.com/apache/druid/pull/15588" target="_blank" rel="noopener noreferrer">#15588</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="file-inputs-for-query-detail-archive">File inputs for query detail archive<a href="#file-inputs-for-query-detail-archive" class="hash-link" aria-label="Direct link to File inputs for query detail archive" title="Direct link to File inputs for query detail archive">​</a></h4><p>The <strong>Load query detail archive</strong> now supports loading queries by selecting a JSON file directly or dragging the file into the dialog.</p><p><img loading="lazy" alt="Load query detail archive" src="/assets/images/image02-5501edd64241f5f2689d5d6ed8e4cbbf.png" width="576" height="388" class="img_ev3q"></p><p><a href="https://github.com/apache/druid/pull/15632" target="_blank" rel="noopener noreferrer">#15632</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="improved-lookup-dialog">Improved lookup dialog<a href="#improved-lookup-dialog" class="hash-link" aria-label="Direct link to Improved lookup dialog" title="Direct link to Improved lookup dialog">​</a></h4><p>The lookup dialog in the web console now includes following optional fields. See <a href="https://druid.apache.org/docs/latest/development/extensions-core/lookups-cached-global#jdbc-lookup" target="_blank" rel="noopener noreferrer">JDBC lookup</a> for more information.</p><ul><li>Jitter seconds</li><li>Load timeout seconds</li><li>Max heap percentage</li></ul><p><img loading="lazy" alt="Lookup dialog" src="/assets/images/image01-8fc0d1038aefe22b7cda862b45ef98a2.png" width="761" height="861" class="img_ev3q"></p><p><a href="https://github.com/apache/druid/pull/15472/" target="_blank" rel="noopener noreferrer">#15472</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="improved-time-chart-brush-and-added-auto-granularity">Improved time chart brush and added auto-granularity<a href="#improved-time-chart-brush-and-added-auto-granularity" class="hash-link" aria-label="Direct link to Improved time chart brush and added auto-granularity" title="Direct link to Improved time chart brush and added auto-granularity">​</a></h4><p>Improved the web console <strong>Explore</strong> view as follows:</p><ul><li>Added the notion of timezone in the explore view.</li><li>Time chart is now able to automatically pick a granularity if &quot;auto&quot; is selected (which is the default) based on the current time filter extent.</li><li>Brush is now automatically enabled in the time chart.</li><li>Brush interval snaps to the selected time granularity.</li><li>Added a highlight bubble to all visualizations (except table because it has its own).</li></ul><p><a href="https://github.com/apache/druid/pull/14990" target="_blank" rel="noopener noreferrer">#14990</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="other-web-console-improvements">Other web console improvements<a href="#other-web-console-improvements" class="hash-link" aria-label="Direct link to Other web console improvements" title="Direct link to Other web console improvements">​</a></h4><ul><li>Added the ability to detect multiple <code>EXPLAIN PLAN</code> queries in the workbench and run them individually <a href="https://github.com/apache/druid/pull/15570" target="_blank" rel="noopener noreferrer">#15570</a></li><li>Added the ability to sort a segment table on start and end when grouping by interval <a href="https://github.com/apache/druid/pull/15720" target="_blank" rel="noopener noreferrer">#15720</a></li><li>Improved the time shift for compare logic in the web console to include literals <a href="https://github.com/apache/druid/pull/15433" target="_blank" rel="noopener noreferrer">#15433</a></li><li>Improved robustness of time shifting in tables in Explore view <a href="https://github.com/apache/druid/pull/15359" target="_blank" rel="noopener noreferrer">#15359</a></li><li>Improved ingesting data using the web console <a href="https://github.com/apache/druid/pull/15339" target="_blank" rel="noopener noreferrer">#15339</a></li><li>Improved management proxy detection <a href="https://github.com/apache/druid/pull/15453" target="_blank" rel="noopener noreferrer">#15453</a></li><li>Fixed rendering on a disabled worker <a href="https://github.com/apache/druid/pull/15712" target="_blank" rel="noopener noreferrer">#15712</a></li><li>Fix an issue where <code>waitUntilSegmentLoad</code> would always be set to <code>true</code> even if explicitly set to <code>false</code> <a href="https://github.com/apache/druid/pull/15781" target="_blank" rel="noopener noreferrer">#15781</a></li><li>Enabled table driven query modification actions to work with slices <a href="https://github.com/apache/druid/pull/15779" target="_blank" rel="noopener noreferrer">#15779</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="general-ingestion">General ingestion<a href="#general-ingestion" class="hash-link" aria-label="Direct link to General ingestion" title="Direct link to General ingestion">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="added-system-fields-to-input-sources">Added system fields to input sources<a href="#added-system-fields-to-input-sources" class="hash-link" aria-label="Direct link to Added system fields to input sources" title="Direct link to Added system fields to input sources">​</a></h4><p>Added the option to return system fields when defining an input source. This allows for ingestion of metadata, such as an S3 object&#x27;s URI.</p><p><a href="https://github.com/apache/druid/pull/15276" target="_blank" rel="noopener noreferrer">#15276</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="changed-how-druid-allocates-weekly-segments">Changed how Druid allocates weekly segments<a href="#changed-how-druid-allocates-weekly-segments" class="hash-link" aria-label="Direct link to Changed how Druid allocates weekly segments" title="Direct link to Changed how Druid allocates weekly segments">​</a></h4><p>When the requested granularity is a month or larger but a segment can&#x27;t be allocated, Druid resorts to day partitioning.
Unless explicitly specified, Druid skips week-granularity segments for data partitioning because these segments don&#x27;t align with the end of the month or more coarse-grained intervals.</p><p>Previously, if Druid couldn&#x27;t allocate segments by month, it tried allocating them by week next.
In the new behavior, Druid skips partitioning by week and goes directly to day. Week segments can only be allocated if the chosen partitioning in the append task is WEEK.</p><p><a href="https://github.com/apache/druid/pull/15589" target="_blank" rel="noopener noreferrer">#15589</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="changed-how-empty-or-null-array-columns-are-stored">Changed how empty or null array columns are stored<a href="#changed-how-empty-or-null-array-columns-are-stored" class="hash-link" aria-label="Direct link to Changed how empty or null array columns are stored" title="Direct link to Changed how empty or null array columns are stored">​</a></h4><p>Columns ingested with the <code>auto</code> column indexer that contain only empty or null containing arrays are now stored as <code>ARRAY&lt;LONG&gt;</code> instead of <code>COMPLEX&lt;json&gt;</code>.</p><p><a href="https://github.com/apache/druid/pull/15505" target="_blank" rel="noopener noreferrer">#15505</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="enabled-skipping-compaction-for-datasources-with-partial-eternity-segments">Enabled skipping compaction for datasources with partial-eternity segments<a href="#enabled-skipping-compaction-for-datasources-with-partial-eternity-segments" class="hash-link" aria-label="Direct link to Enabled skipping compaction for datasources with partial-eternity segments" title="Direct link to Enabled skipping compaction for datasources with partial-eternity segments">​</a></h4><p>Druid now skips compaction for datasources with segments that have an interval start or end which coincides with Eternity interval end-points.</p><p><a href="https://github.com/apache/druid/pull/15542" target="_blank" rel="noopener noreferrer">#15542</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kill-task-improvements">Kill task improvements<a href="#kill-task-improvements" class="hash-link" aria-label="Direct link to Kill task improvements" title="Direct link to Kill task improvements">​</a></h4><p>Improved kill tasks as follows:</p><ul><li>Resolved an issue where the auto-kill feature failed to honor the specified buffer period. This occurred when multiple unused segments within an interval were marked as unused at different times.</li><li>You can submit kill tasks with an optional parameter <code>maxUsedStatusLastUpdatedTime</code>. When set to a date time, the kill task considers segments in the specified interval marked as unused no later than this time. The default behavior is to kill all unused segments in the interval regardless of the time when segments where marked as unused.</li></ul><p><a href="https://github.com/apache/druid/pull/15710" target="_blank" rel="noopener noreferrer">#15710</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="segment-allocation-improvements">Segment allocation improvements<a href="#segment-allocation-improvements" class="hash-link" aria-label="Direct link to Segment allocation improvements" title="Direct link to Segment allocation improvements">​</a></h4><p>Improved segment allocation as follows:</p><ul><li>Changed how Druid allocates weekly segments <a href="https://github.com/apache/druid/pull/15589" target="_blank" rel="noopener noreferrer">#15589</a></li><li>Enhanced polling in segment allocation queue <a href="https://github.com/apache/druid/pull/15590" target="_blank" rel="noopener noreferrer">#15590</a></li><li>Fixed an issue in segment allocation that could cause loss of appended data when running interleaved append and replace tasks <a href="https://github.com/apache/druid/pull/15459" target="_blank" rel="noopener noreferrer">#15459</a></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="other-ingestion-improvements">Other ingestion improvements<a href="#other-ingestion-improvements" class="hash-link" aria-label="Direct link to Other ingestion improvements" title="Direct link to Other ingestion improvements">​</a></h4><ul><li>Added a default implementation for the <code>evalDimension</code> method in the <code>RowFunction</code> interface <a href="https://github.com/apache/druid/pull/15452" target="_blank" rel="noopener noreferrer">#15452</a></li><li>Added a configurable delay to the Peon service that determines how long a Peon should wait before dropping a segment <a href="https://github.com/apache/druid/pull/15373" target="_blank" rel="noopener noreferrer">#15373</a></li><li>Improved metadata store updates by attempting to retry updates rather than failing <a href="https://github.com/apache/druid/pull/15141" target="_blank" rel="noopener noreferrer">#15141</a></li><li>Improved the error message you get when <code>taskQueue</code> reaches <code>maxSize</code> <a href="https://github.com/apache/druid/pull/15409" target="_blank" rel="noopener noreferrer">#15409</a></li><li>Fixed an issue with columnar frames always writing multi-valued columns where the input column had <code>hasMultipleValues = UNKNOWN</code> <a href="https://github.com/apache/druid/pull/15300" target="_blank" rel="noopener noreferrer">#15300</a></li><li>Fixed a race condition where there were multiple attempts to publish segments for the same sequence <a href="https://github.com/apache/druid/pull/14995" target="_blank" rel="noopener noreferrer">#14995</a></li><li>Fixed a race condition that can occur at high streaming concurrency <a href="https://github.com/apache/druid/pull/15174" target="_blank" rel="noopener noreferrer">#15174</a></li><li>Fixed an issue where complex types that are also numbers were assumed to also be double <a href="https://github.com/apache/druid/pull/15272" target="_blank" rel="noopener noreferrer">#15272</a></li><li>Fixed an issue with unnecessary retries triggered when exceptions like <code>IOException</code> obfuscated S3 exceptions <a href="https://github.com/apache/druid/pull/15238" target="_blank" rel="noopener noreferrer">#15238</a></li><li>Fixed segment retrieval when the input interval does not lie within the years <code>[1000, 9999]</code> <a href="https://github.com/apache/druid/pull/15608" target="_blank" rel="noopener noreferrer">#15608</a></li><li>Fixed empty strings being incorrectly converted to null values <a href="https://github.com/apache/druid/pull/15525" target="_blank" rel="noopener noreferrer">#15525</a></li><li>Simplified <code>IncrementalIndex</code> and <code>OnHeapIncrementalIndex</code> by removing some parameters <a href="https://github.com/apache/druid/pull/15448" target="_blank" rel="noopener noreferrer">#15448</a></li><li>Updated active task payloads being accessed from memory before reverting to the metadata store <a href="https://github.com/apache/druid/pull/15377" target="_blank" rel="noopener noreferrer">#15377</a></li><li>Updated <code>OnheapIncrementalIndex</code> to no longer try to offer a thread-safe &quot;add&quot; method <a href="https://github.com/apache/druid/pull/15697" target="_blank" rel="noopener noreferrer">#15697</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sql-based-ingestion">SQL-based ingestion<a href="#sql-based-ingestion" class="hash-link" aria-label="Direct link to SQL-based ingestion" title="Direct link to SQL-based ingestion">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="added-casttotype-parameter">Added <code>castToType</code> parameter<a href="#added-casttotype-parameter" class="hash-link" aria-label="Direct link to added-casttotype-parameter" title="Direct link to added-casttotype-parameter">​</a></h4><p>Added optional <code>castToType</code> parameter to <code>auto</code> column schema.</p><p><a href="https://github.com/apache/druid/pull/15417" target="_blank" rel="noopener noreferrer">#15417</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="improved-the-extend-operator">Improved the EXTEND operator<a href="#improved-the-extend-operator" class="hash-link" aria-label="Direct link to Improved the EXTEND operator" title="Direct link to Improved the EXTEND operator">​</a></h4><p>The EXTEND operator now supports the following array types: <code>VARCHAR ARRAY</code>, <code>BIGINT ARRAY</code>, <code>FLOAT ARRAY</code>, and <code>DOUBLE ARRAY</code>.</p><p>The following example shows an extern input with Druid native input types <code>ARRAY&lt;STRING&gt;</code>, <code>ARRAY&lt;LONG&gt;</code> and <code>STRING</code>:</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">EXTEND </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">a </span><span class="token keyword" style="font-style:italic">VARCHAR</span><span class="token plain"> ARRAY</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> b </span><span class="token keyword" style="font-style:italic">BIGINT</span><span class="token plain"> ARRAY</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> c </span><span class="token keyword" style="font-style:italic">VARCHAR</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="https://github.com/apache/druid/pull/15458" target="_blank" rel="noopener noreferrer">#15458</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="improved-tombstone-generation-to-honor-granularity-specified-in-a-replace-query">Improved tombstone generation to honor granularity specified in a <code>REPLACE</code> query<a href="#improved-tombstone-generation-to-honor-granularity-specified-in-a-replace-query" class="hash-link" aria-label="Direct link to improved-tombstone-generation-to-honor-granularity-specified-in-a-replace-query" title="Direct link to improved-tombstone-generation-to-honor-granularity-specified-in-a-replace-query">​</a></h4><p>MSQ <code>REPLACE</code> queries now generate tombstone segments honoring the segment granularity specified in the query rather than generating irregular tombstones. If a query generates more than 5000 tombstones, Druid returns an MSQ <code>TooManyBucketsFault</code> error, similar to the behavior with data segments.</p><p><a href="https://github.com/apache/druid/pull/15243" target="_blank" rel="noopener noreferrer">#15243</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="improved-hash-joins-using-filters">Improved hash joins using filters<a href="#improved-hash-joins-using-filters" class="hash-link" aria-label="Direct link to Improved hash joins using filters" title="Direct link to Improved hash joins using filters">​</a></h4><p>Improved consistency of JOIN behavior for queries using either the native or MSQ task engine to prune based on base (left-hand side) columns only.</p><p><a href="https://github.com/apache/druid/pull/15299" target="_blank" rel="noopener noreferrer">#15299</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="configurable-page-size-limit">Configurable page size limit<a href="#configurable-page-size-limit" class="hash-link" aria-label="Direct link to Configurable page size limit" title="Direct link to Configurable page size limit">​</a></h4><p>You can now limit the pages size for results of SELECT queries run using the MSQ task engine. See <code>rowsPerPage</code> in the <a href="https://druid.apache.org/docs/latest/multi-stage-query/reference" target="_blank" rel="noopener noreferrer">SQL-based ingestion reference</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="streaming-ingestion">Streaming ingestion<a href="#streaming-ingestion" class="hash-link" aria-label="Direct link to Streaming ingestion" title="Direct link to Streaming ingestion">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="improved-amazon-kinesis-automatic-reset">Improved Amazon Kinesis automatic reset<a href="#improved-amazon-kinesis-automatic-reset" class="hash-link" aria-label="Direct link to Improved Amazon Kinesis automatic reset" title="Direct link to Improved Amazon Kinesis automatic reset">​</a></h4><p>Changed Amazon Kinesis automatic reset behavior to only reset the checkpoints for partitions where sequence numbers are unavailable.</p><p><a href="https://github.com/apache/druid/pull/15338" target="_blank" rel="noopener noreferrer">#15338</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="querying">Querying<a href="#querying" class="hash-link" aria-label="Direct link to Querying" title="Direct link to Querying">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="added-ipv6_match-sql-function">Added IPv6_MATCH SQL function<a href="#added-ipv6_match-sql-function" class="hash-link" aria-label="Direct link to Added IPv6_MATCH SQL function" title="Direct link to Added IPv6_MATCH SQL function">​</a></h4><p>Added IPv6_MATCH SQL function for matching IPv6 addresses in a subnet:</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">IPV6_MATCH</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">address</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> subnet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="https://github.com/apache/druid/pull/15212/" target="_blank" rel="noopener noreferrer">#15212</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="added-json_query_array-function">Added JSON_QUERY_ARRAY function<a href="#added-json_query_array-function" class="hash-link" aria-label="Direct link to Added JSON_QUERY_ARRAY function" title="Direct link to Added JSON_QUERY_ARRAY function">​</a></h4><p>Added JSON_QUERY_ARRAY which is similar to JSON_QUERY except the return type is always <code>ARRAY&lt;COMPLEX&lt;json&gt;&gt;</code> instead of <code>COMPLEX&lt;json&gt;</code>. Essentially, this function allows extracting arrays of objects from nested data and performing operations such as UNNEST, ARRAY_LENGTH, ARRAY_SLICE, or any other available ARRAY operations.</p><p><a href="https://github.com/apache/druid/pull/15521" target="_blank" rel="noopener noreferrer">#15521</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="added-support-for-aggregatemultiplevalues">Added support for <code>aggregateMultipleValues</code><a href="#added-support-for-aggregatemultiplevalues" class="hash-link" aria-label="Direct link to added-support-for-aggregatemultiplevalues" title="Direct link to added-support-for-aggregatemultiplevalues">​</a></h4><p>Improved the <code>ANY_VALUE(expr)</code> function to support the boolean option <code>aggregateMultipleValues</code>. The <code>aggregateMultipleValues</code> option is enabled by default. When you run ANY_VALUE on an MVD, the function returns the stringified array. If <code>aggregateMultipleValues</code> is set to <code>false</code>, ANY_VALUE returns the first value instead.</p><p><a href="https://github.com/apache/druid/pull/15434" target="_blank" rel="noopener noreferrer">#15434</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="added-native-arraycontainselement-filter">Added native <code>arrayContainsElement</code> filter<a href="#added-native-arraycontainselement-filter" class="hash-link" aria-label="Direct link to added-native-arraycontainselement-filter" title="Direct link to added-native-arraycontainselement-filter">​</a></h4><p>Added native <code>arrayContainsElement</code> filter to improve performance when using ARRAY_CONTAINS on array columns.</p><p><a href="https://github.com/apache/druid/pull/15366" target="_blank" rel="noopener noreferrer">#15366</a> <a href="https://github.com/apache/druid/pull/15455" target="_blank" rel="noopener noreferrer">#15455</a></p><p>Also ARRAY_OVERLAP now uses the <code>arrayContainsElement</code> filter when filtering ARRAY typed columns, so that it can use indexes like ARRAY_CONTAINS.</p><p><a href="https://github.com/apache/druid/pull/15451" target="_blank" rel="noopener noreferrer">#15451</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="added-index-support">Added index support<a href="#added-index-support" class="hash-link" aria-label="Direct link to Added index support" title="Direct link to Added index support">​</a></h4><p>Improved nested JSON columns as follows:</p><ul><li>Added <code>ValueIndexes</code> and <code>ArrayElementIndexes</code> for nested arrays.  </li><li>Added <code>ValueIndexes</code> for nested long and double columns.</li></ul><p><a href="https://github.com/apache/druid/pull/15752" target="_blank" rel="noopener noreferrer">#15752</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="improved-timestamp_extract-function">Improved <code>timestamp_extract</code> function<a href="#improved-timestamp_extract-function" class="hash-link" aria-label="Direct link to improved-timestamp_extract-function" title="Direct link to improved-timestamp_extract-function">​</a></h4><p>The <code>timestamp_extract(expr, unit, [timezone])</code> Druid native query function now supports dynamic values.</p><p><a href="https://github.com/apache/druid/pull/15586" target="_blank" rel="noopener noreferrer">#15586</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="improved-json_value-and-json_query">Improved JSON_VALUE and JSON_QUERY<a href="#improved-json_value-and-json_query" class="hash-link" aria-label="Direct link to Improved JSON_VALUE and JSON_QUERY" title="Direct link to Improved JSON_VALUE and JSON_QUERY">​</a></h4><p>Added support for using expressions to compute the JSON path argument for JSON_VALUE and JSON_QUERY functions dynamically. The JSON path argument doesn&#x27;t have to be a constant anymore.</p><p><a href="https://github.com/apache/druid/pull/15320" target="_blank" rel="noopener noreferrer">#15320</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="improved-filtering-performance-for-lookups">Improved filtering performance for lookups<a href="#improved-filtering-performance-for-lookups" class="hash-link" aria-label="Direct link to Improved filtering performance for lookups" title="Direct link to Improved filtering performance for lookups">​</a></h4><p>Enhanced filtering performance for lookups as follows:</p><ul><li>Added <code>sqlReverseLookupThreshold</code> SQL query context parameter. <code>sqlReverseLookupThreshold</code> represents the maximum size of an IN filter that will be created as part of lookup reversal <a href="https://github.com/apache/druid/pull/15832" target="_blank" rel="noopener noreferrer">#15832</a></li><li>Improved loading and dropping of containers for lookups to reduce inconsistencies during updates <a href="https://github.com/apache/druid/pull/14806" target="_blank" rel="noopener noreferrer">#14806</a></li><li>Changed behavior for initialization of lookups to load the first lookup as is, regardless of cache status <a href="https://github.com/apache/druid/pull/15598" target="_blank" rel="noopener noreferrer">#15598</a></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="enabled-query-request-queuing-by-default-when-total-laning-is-turned-on">Enabled query request queuing by default when total laning is turned on<a href="#enabled-query-request-queuing-by-default-when-total-laning-is-turned-on" class="hash-link" aria-label="Direct link to Enabled query request queuing by default when total laning is turned on" title="Direct link to Enabled query request queuing by default when total laning is turned on">​</a></h4><p>When query scheduler threads are less than server HTTP threads, total laning turns on.
This reserves some HTTP threads for non-query requests such as health checks.
The total laning previously would reject any query request that exceeds the lane capacity.
Now, excess requests will instead be queued with a timeout equal to <code>MIN(Integer.MAX_VALUE, druid.server.http.maxQueryTimeout)</code>.</p><p><a href="https://github.com/apache/druid/pull/15440" target="_blank" rel="noopener noreferrer">#15440</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="other-querying-improvements">Other querying improvements<a href="#other-querying-improvements" class="hash-link" aria-label="Direct link to Other querying improvements" title="Direct link to Other querying improvements">​</a></h4><ul><li>Added a supplier that can return <code>NullValueIndex</code> to be used by <code>NullFilter</code>. This improvement should speed up <code>is null</code> and <code>is not null</code> filters on JSON columns <a href="https://github.com/apache/druid/pull/15687" target="_blank" rel="noopener noreferrer">#15687</a></li><li>Added an option to compare results with relative error tolerance <a href="https://github.com/apache/druid/pull/15429" target="_blank" rel="noopener noreferrer">#15429</a></li><li>Added capability for the Broker to access datasource schemas defined in the catalog when processing SQL queries <a href="https://github.com/apache/druid/pull/15469" target="_blank" rel="noopener noreferrer">#15469</a></li><li>Added CONCAT flattening and filter decomposition <a href="https://github.com/apache/druid/pull/15634" target="_blank" rel="noopener noreferrer">#15634</a></li><li>Enabled ARRAY_TO_MV to support expression inputs <a href="https://github.com/apache/druid/pull/15528" target="_blank" rel="noopener noreferrer">#15528</a></li><li>Improved <code>ExpressionPostAggregator</code> to handle ARRAY types output by the grouping engine <a href="https://github.com/apache/druid/pull/15543" target="_blank" rel="noopener noreferrer">#15543</a></li><li>Improved the error message you get when there&#x27;s an error in the specified interval <a href="https://github.com/apache/druid/pull/15454" target="_blank" rel="noopener noreferrer">#15454</a></li><li>Improved how three-valued logic is handled <a href="https://github.com/apache/druid/pull/15629" target="_blank" rel="noopener noreferrer">#15629</a></li><li>Improved error reporting for math functions <a href="https://github.com/apache/druid/pull/14987" target="_blank" rel="noopener noreferrer">#14987</a></li><li>Improved handling of COALESCE, SEARCH, and filter optimization <a href="https://github.com/apache/druid/pull/15609" target="_blank" rel="noopener noreferrer">#15609</a></li><li>Increased memory available for subqueries when the query scheduler is configured to limit queries below the number of server threads <a href="https://github.com/apache/druid/pull/15295" target="_blank" rel="noopener noreferrer">#15295</a></li><li>Optimized SQL planner for filter expressions by introducing column indexes for expression virtual columns <a href="https://github.com/apache/druid/pull/15585" target="_blank" rel="noopener noreferrer">#15585</a></li><li>Optimized queries involving large NOT IN operations <a href="https://github.com/apache/druid/pull/15625" target="_blank" rel="noopener noreferrer">#15625</a></li><li>Fixed an issue with nested empty array fields <a href="https://github.com/apache/druid/pull/15532" target="_blank" rel="noopener noreferrer">#15532</a></li><li>Fixed NPE with virtual expression with unnest <a href="https://github.com/apache/druid/pull/15513" target="_blank" rel="noopener noreferrer">#15513</a></li><li>Fixed an issue with AND and OR operators and numeric <code>nvl</code> not clearing out stale null vectors for vector expression processing <a href="https://github.com/apache/druid/pull/15587" target="_blank" rel="noopener noreferrer">#15587</a></li><li>Fixed an issue with filtering columns when using partial paths such as in <code>JSON_QUERY</code> <a href="https://github.com/apache/druid/pull/15643" target="_blank" rel="noopener noreferrer">#15643</a></li><li>Fixed queries that raise an exception when sketches are stored in cache <a href="https://github.com/apache/druid/pull/15654" target="_blank" rel="noopener noreferrer">#15654</a></li><li>Fixed queries involving JSON functions that failed when using negative indexes <a href="https://github.com/apache/druid/pull/15650" target="_blank" rel="noopener noreferrer">#15650</a></li><li>Fixed an issue where queries involving filters on TIME_FLOOR could encounter <code>ClassCastException</code> when comparing <code>RangeValue</code> in <code>CombineAndSimplifyBounds</code> <a href="https://github.com/apache/druid/pull/15778" target="_blank" rel="noopener noreferrer">#15778</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="data-management">Data management<a href="#data-management" class="hash-link" aria-label="Direct link to Data management" title="Direct link to Data management">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="changed-numcorepartitions-to-0-for-tombstones">Changed <code>numCorePartitions</code> to 0 for tombstones<a href="#changed-numcorepartitions-to-0-for-tombstones" class="hash-link" aria-label="Direct link to changed-numcorepartitions-to-0-for-tombstones" title="Direct link to changed-numcorepartitions-to-0-for-tombstones">​</a></h4><p>Tombstone segments now have 0 core partitions. This means they can be dropped or removed independently without affecting availability of other appended segments in the same co-partition space. Prior to this change, removing tombstones with 1 core partition that contained appended segments in the partition space could make the appended segments unavailable.</p><p><a href="https://github.com/apache/druid/pull/15379" target="_blank" rel="noopener noreferrer">#15379</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="clean-up-duty-for-non-overlapping-eternity-tombstones">Clean up duty for non-overlapping eternity tombstones<a href="#clean-up-duty-for-non-overlapping-eternity-tombstones" class="hash-link" aria-label="Direct link to Clean up duty for non-overlapping eternity tombstones" title="Direct link to Clean up duty for non-overlapping eternity tombstones">​</a></h4><p>Added <code>MarkEternityTombstonesAsUnused</code> to clean up non-overlapping eternity tombstones<!-- -->—<!-- -->tombstone segments that either start at <code>-INF</code> or end at <code>INF</code> and don&#x27;t overlap with any overshadowed used segments in the datasource.</p><p>Also added a new metric <code>segment/unneededEternityTombstone/count</code> to count the number of dropped non-overshadowed eternity tombstones per datasource.</p><p><a href="https://github.com/apache/druid/pull/15281" target="_blank" rel="noopener noreferrer">#15281</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="enabled-skipping-compaction-for-datasources-with-partial-eternity-segments-1">Enabled skipping compaction for datasources with partial-eternity segments<a href="#enabled-skipping-compaction-for-datasources-with-partial-eternity-segments-1" class="hash-link" aria-label="Direct link to Enabled skipping compaction for datasources with partial-eternity segments" title="Direct link to Enabled skipping compaction for datasources with partial-eternity segments">​</a></h4><p>Druid now skips compaction for datasources with segments that have their interval start or end coinciding with Eternity interval end-points.</p><p><a href="https://github.com/apache/druid/pull/15542" target="_blank" rel="noopener noreferrer">#15542</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="enhanced-the-json-parser-unexpected-token-logging">Enhanced the JSON parser unexpected token logging<a href="#enhanced-the-json-parser-unexpected-token-logging" class="hash-link" aria-label="Direct link to Enhanced the JSON parser unexpected token logging" title="Direct link to Enhanced the JSON parser unexpected token logging">​</a></h4><p>The JSON parser unexpected token error now includes the context of the expected <code>VALUE_STRING</code> token. This makes it easier to track mesh/proxy network error messages and to avoid unnecessary research into Druid server rest endpoint responses.</p><p><a href="https://github.com/apache/druid/pull/15176" target="_blank" rel="noopener noreferrer">#15176</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="other-data-management-improvements">Other data management improvements<a href="#other-data-management-improvements" class="hash-link" aria-label="Direct link to Other data management improvements" title="Direct link to Other data management improvements">​</a></h4><ul><li>Fixed an issue where the Broker would return an HTTP <code>400</code> status code instead of <code>503</code> when a Coordinator was temporarily unavailable, such as during a rolling upgrade <a href="https://github.com/apache/druid/pull/15756" target="_blank" rel="noopener noreferrer">#15756</a></li><li>Added user identity to Router query request logs <a href="https://github.com/apache/druid/pull/15126" target="_blank" rel="noopener noreferrer">#15126</a></li><li>Improved process to retrieve segments from metadata store by retrieving segments in batches <a href="https://github.com/apache/druid/pull/15305" target="_blank" rel="noopener noreferrer">#15305</a></li><li>Improved logging messages when skipping auto-compaction for a data source <a href="https://github.com/apache/druid/pull/15460" target="_blank" rel="noopener noreferrer">#15460</a></li><li>Improved compaction by modifying the segment iterator to skip intervals without data <a href="https://github.com/apache/druid/pull/15676" target="_blank" rel="noopener noreferrer">#15676</a></li><li>Increased <code>_acceptQueueSize</code> based on value of <code>net.core.somaxconn</code> <a href="https://github.com/apache/druid/pull/15596" target="_blank" rel="noopener noreferrer">#15596</a></li><li>Optimized the process to mark segments as unused <a href="https://github.com/apache/druid/pull/15352" target="_blank" rel="noopener noreferrer">#15352</a></li><li>Updated auto-compaction to preserve spatial dimensions rather than rewrite them into regular string dimensions <a href="https://github.com/apache/druid/pull/15321" target="_blank" rel="noopener noreferrer">#15321</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="metrics-and-monitoring">Metrics and monitoring<a href="#metrics-and-monitoring" class="hash-link" aria-label="Direct link to Metrics and monitoring" title="Direct link to Metrics and monitoring">​</a></h3><ul><li>Added worker status and duration metrics in live and task reports <a href="https://github.com/apache/druid/pull/15180" target="_blank" rel="noopener noreferrer">#15180</a></li><li>Updated <code>serviceName</code> for <code>segment/count</code> metric to match the configured metric name within the StatsD emitter <a href="https://github.com/apache/druid/pull/15347" target="_blank" rel="noopener noreferrer">#15347</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="extensions">Extensions<a href="#extensions" class="hash-link" aria-label="Direct link to Extensions" title="Direct link to Extensions">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="basic-security-improvements">Basic security improvements<a href="#basic-security-improvements" class="hash-link" aria-label="Direct link to Basic security improvements" title="Direct link to Basic security improvements">​</a></h4><p>The computed hash values of passwords are now cached for the <code>druid-basic-security</code> extension to boost authentication validator performance.</p><p><a href="https://github.com/apache/druid/pull/15648" target="_blank" rel="noopener noreferrer">#15648</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="datasketches-improvements">DataSketches improvements<a href="#datasketches-improvements" class="hash-link" aria-label="Direct link to DataSketches improvements" title="Direct link to DataSketches improvements">​</a></h4><ul><li>Improved performance of HLL sketch merge aggregators <a href="https://github.com/apache/druid/pull/15162" target="_blank" rel="noopener noreferrer">#15162</a></li><li>Updated histogram post-aggregators for Quantiles and KLL sketches for when all values in the sketch are equal. Previously these queries fail but now return <code>[N, 0, 0, ...]</code>, where N is the number of values in the sketch, and the length of the list is equal to the value assigned to <code>numBins</code> <a href="https://github.com/apache/druid/pull/15381" target="_blank" rel="noopener noreferrer">#15381</a></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="microsoft-azure-improvements">Microsoft Azure improvements<a href="#microsoft-azure-improvements" class="hash-link" aria-label="Direct link to Microsoft Azure improvements" title="Direct link to Microsoft Azure improvements">​</a></h4><ul><li>Added support for Azure Storage Accounts authentication options <a href="https://github.com/apache/druid/pull/15287" target="_blank" rel="noopener noreferrer">#15287</a></li><li>Added support for Azure Government when using Microsoft Azure Storage for deep storage <a href="https://github.com/apache/druid/pull/15523" target="_blank" rel="noopener noreferrer">#15523</a></li><li>Fixed the <code>batchDeleteFiles</code> method in Azure Storage <a href="https://github.com/apache/druid/pull/15730" target="_blank" rel="noopener noreferrer">#15730</a></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kubernetes-improvements">Kubernetes improvements<a href="#kubernetes-improvements" class="hash-link" aria-label="Direct link to Kubernetes improvements" title="Direct link to Kubernetes improvements">​</a></h4><ul><li>Added cleanup lifecycle management for MiddleManager-less task scheduling <a href="https://github.com/apache/druid/pull/15133" target="_blank" rel="noopener noreferrer">#15133</a></li><li>Fixed an issue where the Overlord does not start when a cluster does not use a MiddleManager or ZooKeeper <a href="https://github.com/apache/druid/pull/15445" target="_blank" rel="noopener noreferrer">#15445</a></li><li>Improved logs and status messages for MiddleManager-less ingestion <a href="https://github.com/apache/druid/pull/15527" target="_blank" rel="noopener noreferrer">#15527</a></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kafka-emitter-improvements">Kafka emitter improvements<a href="#kafka-emitter-improvements" class="hash-link" aria-label="Direct link to Kafka emitter improvements" title="Direct link to Kafka emitter improvements">​</a></h4><ul><li>Added a config option to the Kafka emitter that lets you mask sensitive values for the Kafka producer. This feature is optional and will not affect prior configs for the emitter <a href="https://github.com/apache/druid/pull/15485" target="_blank" rel="noopener noreferrer">#15485</a></li><li>Resolved <code>InterruptedException</code> logging in ingestion task logs <a href="https://github.com/apache/druid/pull/15519" target="_blank" rel="noopener noreferrer">#15519</a></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="prometheus-emitter-improvements">Prometheus emitter improvements<a href="#prometheus-emitter-improvements" class="hash-link" aria-label="Direct link to Prometheus emitter improvements" title="Direct link to Prometheus emitter improvements">​</a></h4><p>You can configure the <code>pushgateway</code> strategy to delete metrics from Prometheus push gateway on task shutdown using the following Prometheus emitter configurations:</p><ul><li><code>druid.emitter.prometheus.deletePushGatewayMetricsOnShutdown</code>: When set to true, peon tasks delete metrics from the Prometheus push gateway on task shutdown. Default value is false.</li><li><code>druid.emitter.prometheus.waitForShutdownDelay</code>: Time in milliseconds to wait for peon tasks to delete metrics from <code>pushgateway</code> on shutdown. Applicable only when <code>druid.emitter.prometheus.deletePushGatewayMetricsOnShutdown</code> is set to true. Default value is none, meaning that there is no delay between peon task shutdown and metrics deletion from the push gateway.</li></ul><p><a href="https://github.com/apache/druid/pull/14935" target="_blank" rel="noopener noreferrer">#14935</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="iceberg-improvements">Iceberg improvements<a href="#iceberg-improvements" class="hash-link" aria-label="Direct link to Iceberg improvements" title="Direct link to Iceberg improvements">​</a></h4><p>Improved the Iceberg extension as follows:</p><ul><li>Added a parameter <code>snapshotTime</code> to the iceberg input source spec that allows the user to ingest data files associated with the most recent snapshot. This helps the user ingest data based on older snapshots by specifying the associated snapshot time <a href="https://github.com/apache/druid/pull/15348" target="_blank" rel="noopener noreferrer">#15348</a></li><li>Added a new Iceberg ingestion filter of type <code>range</code> to filter on ranges of column values <a href="https://github.com/apache/druid/pull/15782" target="_blank" rel="noopener noreferrer">#15782</a></li><li>Fixed a typo in the Iceberg warehouse path for s3 <a href="https://github.com/apache/druid/pull/15823" target="_blank" rel="noopener noreferrer">#15823</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="upgrade-notes-and-incompatible-changes">Upgrade notes and incompatible changes<a href="#upgrade-notes-and-incompatible-changes" class="hash-link" aria-label="Direct link to Upgrade notes and incompatible changes" title="Direct link to Upgrade notes and incompatible changes">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="upgrade-notes">Upgrade notes<a href="#upgrade-notes" class="hash-link" aria-label="Direct link to Upgrade notes" title="Direct link to Upgrade notes">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="changes-in-targetdatasource-payload-present-in-the-explain-plan-for-msq-queries">Changes in <code>targetDataSource</code> payload present in the explain plan for MSQ queries<a href="#changes-in-targetdatasource-payload-present-in-the-explain-plan-for-msq-queries" class="hash-link" aria-label="Direct link to changes-in-targetdatasource-payload-present-in-the-explain-plan-for-msq-queries" title="Direct link to changes-in-targetdatasource-payload-present-in-the-explain-plan-for-msq-queries">​</a></h4><p>Druid 29 has a breaking change for EXPLAIN for INSERT/REPLACE MSQ queries.
In the attribute field returned as part of the result for an explain query, the value of the key <code>targetDataSource</code> from a string to a JSON object.
This change is only present in Druid 29 and is not present in earlier or later versions.</p><p>The JSON object returned plan will have the structure if the target is a datasource:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;targetDataSource&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;type&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;table&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;tableName&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;wikipedia&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The JSON object returned plan will have the structure if the target is an external export location using :</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;targetDataSource&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;type&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;external&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;storageConnectorProvider&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;type&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&lt;export-type&gt;&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;exportPath&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&lt;export-path&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="changed-equals-filter-for-native-queries">Changed <code>equals</code> filter for native queries<a href="#changed-equals-filter-for-native-queries" class="hash-link" aria-label="Direct link to changed-equals-filter-for-native-queries" title="Direct link to changed-equals-filter-for-native-queries">​</a></h4><p>The <a href="https://druid.apache.org/docs/latest/querying/filters#equality-filter" target="_blank" rel="noopener noreferrer">equality filter</a> on mixed type <code>auto</code> columns that contain arrays must now be filtered as their presenting type. This means that if any rows are arrays (for example, the segment metadata and <code>information_schema</code> reports the type as some array type), then the native queries must also filter as if they are some array type.</p><p>This change impacts mixed type <code>auto</code> columns that contain both scalars and arrays. It doesn&#x27;t impact SQL, which already has this limitation due to how the type presents itself.</p><p><a href="https://github.com/apache/druid/pull/15503" target="_blank" rel="noopener noreferrer">#15503</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="console-automatically-sets-arrayingestmode-for-msq-queries">Console automatically sets <code>arrayIngestMode</code> for MSQ queries<a href="#console-automatically-sets-arrayingestmode-for-msq-queries" class="hash-link" aria-label="Direct link to console-automatically-sets-arrayingestmode-for-msq-queries" title="Direct link to console-automatically-sets-arrayingestmode-for-msq-queries">​</a></h4><p>Druid console now configures the <code>arrayIngestMode</code> parameter in the data loading flow, and its value can persist across the SQL tab unless manually updated. When loading multi-value dimensions or arrays in the Druid console, note the value of the <code>arrayIngestMode</code> parameter to prevent mixing multi-value dimensions and arrays in the same column of a data source.</p><p><a href="https://github.com/apache/druid/pull/15588" target="_blank" rel="noopener noreferrer">#15588</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="improved-concurrent-append-and-replace-experimental-1">Improved concurrent append and replace (experimental)<a href="#improved-concurrent-append-and-replace-experimental-1" class="hash-link" aria-label="Direct link to Improved concurrent append and replace (experimental)" title="Direct link to Improved concurrent append and replace (experimental)">​</a></h4><p>You no longer have to manually determine the task lock type for concurrent append and replace (experimental) with the <code>taskLockType</code> task context. Instead, Druid can now determine it automatically for you. You can use the context parameter <code>&quot;useConcurrentLocks&quot;: true</code> for individual tasks and datasources or enable concurrent append and replace at a cluster level using <code>druid.indexer.task.default.context</code>.</p><p><a href="https://github.com/apache/druid/pull/15684" target="_blank" rel="noopener noreferrer">#15684</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="enabled-empty-ingest-queries-1">Enabled empty ingest queries<a href="#enabled-empty-ingest-queries-1" class="hash-link" aria-label="Direct link to Enabled empty ingest queries" title="Direct link to Enabled empty ingest queries">​</a></h4><p>The MSQ task engine now allows empty ingest queries by default. For queries that don&#x27;t generate any output rows, the MSQ task engine reports zero values for <code>numTotalRows</code> and <code>totalSizeInBytes</code> instead of null. Previously, ingest queries that produced no data would fail with the <code>InsertCannotBeEmpty</code> MSQ fault.</p><p>To revert to the original behavior, set the MSQ query parameter <code>failOnEmptyInsert</code> to <code>true</code>.</p><p><a href="https://github.com/apache/druid/pull/15495" target="_blank" rel="noopener noreferrer">#15495</a> <a href="https://github.com/apache/druid/pull/15674" target="_blank" rel="noopener noreferrer">#15674</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="enabled-query-request-queuing-by-default-when-total-laning-is-turned-on-1">Enabled query request queuing by default when total laning is turned on<a href="#enabled-query-request-queuing-by-default-when-total-laning-is-turned-on-1" class="hash-link" aria-label="Direct link to Enabled query request queuing by default when total laning is turned on" title="Direct link to Enabled query request queuing by default when total laning is turned on">​</a></h4><p>When query scheduler threads are less than server HTTP threads, total laning turns on.
This reserves some HTTP threads for non-query requests such as health checks.
The total laning previously would reject any query request that exceeds the lane capacity.
Now, excess requests will instead be queued with a timeout equal to <code>MIN(Integer.MAX_VALUE, druid.server.http.maxQueryTimeout)</code>.</p><p><a href="https://github.com/apache/druid/pull/15440" target="_blank" rel="noopener noreferrer">#15440</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="changed-how-empty-or-null-array-columns-are-stored-1">Changed how empty or null array columns are stored<a href="#changed-how-empty-or-null-array-columns-are-stored-1" class="hash-link" aria-label="Direct link to Changed how empty or null array columns are stored" title="Direct link to Changed how empty or null array columns are stored">​</a></h4><p>Columns ingested with the auto column indexer that contain only empty or null arrays are now stored as <code>ARRAY&lt;LONG\&gt;</code> instead of <code>COMPLEX&lt;json\&gt;</code>.</p><p><a href="https://github.com/apache/druid/pull/15505" target="_blank" rel="noopener noreferrer">#15505</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="changed-how-druid-allocates-weekly-segments-1">Changed how Druid allocates weekly segments<a href="#changed-how-druid-allocates-weekly-segments-1" class="hash-link" aria-label="Direct link to Changed how Druid allocates weekly segments" title="Direct link to Changed how Druid allocates weekly segments">​</a></h4><p>When the requested granularity is a month or larger but a segment can&#x27;t be allocated, Druid resorts to day partitioning.
Unless explicitly specified, Druid skips week-granularity segments for data partitioning because these segments don&#x27;t align with the end of the month or more coarse-grained intervals.</p><p>Previously, if Druid couldn&#x27;t allocate segments by month, it tried allocating them by week next.
In the new behavior, Druid skips partitioning by week and goes directly to day. Week segments can only be allocated if the chosen partitioning in the append task is WEEK.</p><p><a href="https://github.com/apache/druid/pull/15589" target="_blank" rel="noopener noreferrer">#15589</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="removed-the-auto-search-strategy">Removed the <code>auto</code> search strategy<a href="#removed-the-auto-search-strategy" class="hash-link" aria-label="Direct link to removed-the-auto-search-strategy" title="Direct link to removed-the-auto-search-strategy">​</a></h3><p>Removed the <code>auto</code> search strategy from the native search query. Setting <code>searchStrategy</code> to <code>auto</code> is now equivalent to <code>useIndexes</code>.</p><p><a href="https://github.com/apache/druid/pull/15550" target="_blank" rel="noopener noreferrer">#15550</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="developer-notes">Developer notes<a href="#developer-notes" class="hash-link" aria-label="Direct link to Developer notes" title="Direct link to Developer notes">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="improved-indimfilter-reverse-lookup-optimization">Improved <code>InDimFilter</code> reverse-lookup optimization<a href="#improved-indimfilter-reverse-lookup-optimization" class="hash-link" aria-label="Direct link to improved-indimfilter-reverse-lookup-optimization" title="Direct link to improved-indimfilter-reverse-lookup-optimization">​</a></h4><p>This improvement includes the following changes:</p><ul><li>Added the <code>mayIncludeUnknown</code> parameter to <code>DimFilter#optimize</code>.</li><li>Enabled <code>InDimFilter#optimizeLookup</code> to handle <code>mayIncludeUnknown</code> and perform reverse lookups in a wider range of cases.</li><li>Made <code>unapply</code> method in <code>LookupExtractor</code> protected and relocated callers to <code>unapplyAll</code>.</li></ul><p>If your extensions provide a <code>DimFilter</code>, you may need to rebuild them to ensure compatibility with this release.</p><p><a href="https://github.com/apache/druid/pull/15611" target="_blank" rel="noopener noreferrer">#15611</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="other-developer-improvements">Other developer improvements<a href="#other-developer-improvements" class="hash-link" aria-label="Direct link to Other developer improvements" title="Direct link to Other developer improvements">​</a></h4><ul><li>Fixed an issue with the Druid Docker image <a href="https://github.com/apache/druid/pull/15264" target="_blank" rel="noopener noreferrer">#15264</a></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="web-console-logging">Web console logging<a href="#web-console-logging" class="hash-link" aria-label="Direct link to Web console logging" title="Direct link to Web console logging">​</a></h4><p>The web console now logs request errors in end-to-end tests to help with debugging.</p><p><a href="https://github.com/apache/druid/pull/15483" target="_blank" rel="noopener noreferrer">#15483</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="dependency-updates">Dependency updates<a href="#dependency-updates" class="hash-link" aria-label="Direct link to Dependency updates" title="Direct link to Dependency updates">​</a></h4><p>The following dependencies have been updated:</p><ul><li><p>Added <code>chronoshift</code> as a dependency <a href="https://github.com/apache/druid/pull/14990" target="_blank" rel="noopener noreferrer">#14990</a></p></li><li><p>Added <code>gson</code> to <code>pom.xml</code> <a href="https://github.com/apache/druid/pull/15488/" target="_blank" rel="noopener noreferrer">#15488</a></p></li><li><p>Updated Confluent&#x27;s dependencies to 6.2.12 <a href="https://github.com/apache/druid/pull/15441" target="_blank" rel="noopener noreferrer">#15441</a></p></li><li><p>Excluded <code>jackson-jaxrs</code> from <code>ranger-plugin-common</code>, which isn&#x27;t required, to address CVEs <a href="https://github.com/apache/druid/pull/15481" target="_blank" rel="noopener noreferrer">#15481</a></p></li><li><p>Updated AWS SDK version to <code>1.12.638</code> <a href="https://github.com/apache/druid/pull/15814" target="_blank" rel="noopener noreferrer">#15814</a></p></li><li><p>Updated Avro to 1.11.3 <a href="https://github.com/apache/druid/pull/15419" target="_blank" rel="noopener noreferrer">#15419</a></p></li><li><p>Updated Ranger libraries to the newest available version <a href="https://github.com/apache/druid/pull/15363" target="_blank" rel="noopener noreferrer">#15363</a></p></li><li><p>Updated the iceberg core version to 1.4.1 <a href="https://github.com/apache/druid/pull/15348" target="_blank" rel="noopener noreferrer">#15348</a></p></li><li><p>Reduced dependency footprint for the iceberg extension <a href="https://github.com/apache/druid/pull/15280" target="_blank" rel="noopener noreferrer">#15280</a></p></li><li><p>Updated <code>com.github.eirslett</code> version to 1.15.0 <a href="https://github.com/apache/druid/pull/15556" target="_blank" rel="noopener noreferrer">#15556</a></p></li><li><p>Updated multiple webpack dependencies:</p><ul><li><code>webpack</code> to 5.89.0</li><li><code>webpack-bundle-analyzer</code> to 4.10.1</li><li><code>webpack-cli</code> to 5.1.4</li><li><code>webpack-dev-server</code> to 4.15.1</li></ul><p><a href="https://github.com/apache/druid/pull/15555" target="_blank" rel="noopener noreferrer">#15555</a></p></li><li><p>Updated <code>pac4j-oidc</code> java security library version to 4.5.7 <a href="https://github.com/apache/druid/pull/15522" target="_blank" rel="noopener noreferrer">#15522</a></p></li><li><p>Updated <code>io.kubernetes.client-java</code> version to 19.0.0 and <code>docker-java-bom</code> to 3.3.4 <a href="https://github.com/apache/druid/pull/15449" target="_blank" rel="noopener noreferrer">#15449</a></p></li><li><p>Updated core Apache Kafka dependencies to 3.6.1 <a href="https://github.com/apache/druid/pull/15539" target="_blank" rel="noopener noreferrer">#15539</a></p></li><li><p>Updated and pruned multiple dependencies for the web console, including dropping Babel. As a result, Internet Explorer 11 is no longer supported with the web console <a href="https://github.com/apache/druid/pull/15487" target="_blank" rel="noopener noreferrer">#15487</a></p></li><li><p>Updated Apache Zookeeper to 3.8.3 from 3.5.10 <a href="https://github.com/apache/druid/pull/15477" target="_blank" rel="noopener noreferrer">#15477</a></p></li><li><p>Updated Gauva to 32.0.1 from 31.1 <a href="https://github.com/apache/druid/pull/15482" target="_blank" rel="noopener noreferrer">#15482</a></p></li><li><p>Updated multiple dependencies to address CVEs:</p><ul><li><code>dropwizard-metrics</code> to 4.2.22 to address GHSA-mm8h-8587-p46h in <code>com.rabbitmq:amqp-client</code></li><li><code>ant</code> to 1.10.14 to resolve GHSA-f62v-xpxf-3v68, GHSA-4p6w-m9wc-c9c9, GHSA-q5r4-cfpx-h6fh, and GHSA-5v34-g2px-j4fw</li><li><code>comomons-compress</code> to 1.24.0 to resolve GHSA-cgwf-w82q-5jrr</li><li><code>jose4j</code> to 0.9.3 to resolve GHSA-7g24-qg88-p43q and GHSA-jgvc-jfgh-rjvv</li><li><code>kotlin-stdlib</code> to 1.6.0 to resolve GHSA-cqj8-47ch-rvvq and CVE-2022-24329</li></ul><p><a href="https://github.com/apache/druid/pull/15464" target="_blank" rel="noopener noreferrer">#15464</a></p></li><li><p>Updated Jackson to version 2.12.7.1 to address CVE-2022-42003 and CVE-2022-42004 which affects <code>jackson-databind</code> <a href="https://github.com/apache/druid/pull/15461" target="_blank" rel="noopener noreferrer">#15461</a></p></li><li><p>Updated <code>com.google.code.gson:gson</code> from 2.2.4 to 2.10.1 since 2.2.4 is affected by CVE-2022-25647 <a href="https://github.com/apache/druid/pull/15461" target="_blank" rel="noopener noreferrer">#15461</a></p></li><li><p>Updated Jedis to version 5.0.2 <a href="https://github.com/apache/druid/pull/15344" target="_blank" rel="noopener noreferrer">#15344</a></p></li><li><p>Updated <code>commons-codec:commons-codec</code> from 1.13 to 1.16.0 <a href="https://github.com/apache/druid/pull/14819" target="_blank" rel="noopener noreferrer">#14819</a></p></li><li><p>Updated Nimbus version to <code>8.22.1</code> <a href="https://github.com/apache/druid/pull/15753" target="_blank" rel="noopener noreferrer">#15753</a></p></li></ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/29.0.0/misc/papers-and-talks"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Papers</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/29.0.0/release-info/upgrade-notes"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Upgrade notes</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#important-features-changes-and-deprecations" class="table-of-contents__link toc-highlight">Important features, changes, and deprecations</a><ul><li><a href="#msq-export-statements-experimental" class="table-of-contents__link toc-highlight">MSQ export statements (experimental)</a></li><li><a href="#sql-pivot-and-unpivot-experimental" class="table-of-contents__link toc-highlight">SQL PIVOT and UNPIVOT (experimental)</a></li><li><a href="#range-support-in-window-functions-experimental" class="table-of-contents__link toc-highlight">Range support in window functions (experimental)</a></li><li><a href="#improved-inner-joins" class="table-of-contents__link toc-highlight">Improved INNER joins</a></li><li><a href="#improved-concurrent-append-and-replace-experimental" class="table-of-contents__link toc-highlight">Improved concurrent append and replace (experimental)</a></li><li><a href="#first-and-last-aggregators-for-double-float-and-long-data-types" class="table-of-contents__link toc-highlight">First and last aggregators for double, float, and long data types</a></li><li><a href="#support-for-logging-audit-events" class="table-of-contents__link toc-highlight">Support for logging audit events</a></li><li><a href="#enabled-empty-ingest-queries" class="table-of-contents__link toc-highlight">Enabled empty ingest queries</a></li><li><a href="#msq-support-for-google-cloud-storage" class="table-of-contents__link toc-highlight">MSQ support for Google Cloud Storage</a></li><li><a href="#experimental-extensions" class="table-of-contents__link toc-highlight">Experimental extensions</a></li></ul></li><li><a href="#functional-area-and-related-changes" class="table-of-contents__link toc-highlight">Functional area and related changes</a><ul><li><a href="#web-console" class="table-of-contents__link toc-highlight">Web console</a></li><li><a href="#general-ingestion" class="table-of-contents__link toc-highlight">General ingestion</a></li><li><a href="#sql-based-ingestion" class="table-of-contents__link toc-highlight">SQL-based ingestion</a></li><li><a href="#streaming-ingestion" class="table-of-contents__link toc-highlight">Streaming ingestion</a></li><li><a href="#querying" class="table-of-contents__link toc-highlight">Querying</a></li><li><a href="#data-management" class="table-of-contents__link toc-highlight">Data management</a></li><li><a href="#metrics-and-monitoring" class="table-of-contents__link toc-highlight">Metrics and monitoring</a></li><li><a href="#extensions" class="table-of-contents__link toc-highlight">Extensions</a></li></ul></li><li><a href="#upgrade-notes-and-incompatible-changes" class="table-of-contents__link toc-highlight">Upgrade notes and incompatible changes</a><ul><li><a href="#upgrade-notes" class="table-of-contents__link toc-highlight">Upgrade notes</a></li><li><a href="#removed-the-auto-search-strategy" class="table-of-contents__link toc-highlight">Removed the <code>auto</code> search strategy</a></li><li><a href="#developer-notes" class="table-of-contents__link toc-highlight">Developer notes</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/favicon.png" class="themedImage_ToTc themedImage--light_HNdA footer__logo"><img src="/img/favicon.png" class="themedImage_ToTc themedImage--dark_i4oU footer__logo"></div><div class="footer__copyright">Copyright © 2023 Apache Software Foundation. Except where otherwise noted, licensed under CC BY-SA 4.0. Apache Druid, Druid, and the Druid logo are either registered trademarks or trademarks of The Apache Software Foundation in the United States and other countries.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.40c33c04.js"></script>
<script src="/assets/js/main.c54d5655.js"></script>
</body>
</html>